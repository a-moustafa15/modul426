<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
</head>

<body>
    <canvas id="dailyChart"></canvas>
    <canvas id="weeklyChart"></canvas>
    <script>

        var Data = [
            '2019-11-23T05:50:00',
            '2019-11-23T06:50:00',
            '2019-11-23T09:50:00',
            '2019-11-20T10:10:00',
            '2019-11-20T12:50:00',
            '2019-11-20T15:10:00',
            '2019-11-20T18:20:00',
            '2019-11-20T20:50:00'
        ]

        var dataToday = []
        var dataLastWeek = []

        var dayNames = ['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag'];

        var today = new Date();

        var todayOneWeekAgo = new Date();
        todayOneWeekAgo.setDate(today.getDate() - 7);

        Data.forEach(timestamp => {
            var stamp = new Date(timestamp);

            if (stamp.getDate() == today.getDate()) {
                dataToday.push(stamp);
            }

            console.log(roundMinutes(stamp));

            if (stamp >= todayOneWeekAgo) {
                var dayName = dayNames[stamp.getDay()];
                dataLastWeek.push(dayName);
            }
        });

        var map = dataLastWeek.reduce(function (prev, cur) {
            prev[cur] = (prev[cur] || 0) + 1;
            return prev;
        }, {});

        console.log(map);

       

        //console.log(JSON.stringify(map));

        function roundMinutes(date) {
            date.setHours(date.getHours() + Math.round(date.getMinutes() / 60));
            date.setMinutes(0);
            return date;
        }

        console.log("heute: " + dataToday);
        console.log("ganze woche: " + dataLastWeek);


        var ctx = document.getElementById('dailyChart').getContext('2d');
        var DailyChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: dataToday,
                datasets: [{
                    label: 'Daten Tag',
                    data: [0, 10, 5, 2, 20, 30, 45],
                    backgroundColor: "rgb(0, 200, 100, 0.5)"
                }]
            }
        });

        var ctx = document.getElementById('weeklyChart').getContext('2d');
        var WeeklyChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: dataLastWeek,
                datasets: [{
                    label: 'Daten Woche',
                    data: [0, 10, 5, 2, 20, 30, 45],
                    backgroundColor: "rgb(200, 0, 100, 0.5)"
                }]
            }
        });


        DailyChart.canvas.parentNode.style.width = '500px';
        WeeklyChart.canvas.parentNode.style.width = '500px';

    </script>
</body>

</html>